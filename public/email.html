<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open Sans">
<style>
body {
	font-family: 'Open Sans', serif;
	font-size: 15px;
}
form {
	position:fixed;
	bottom: 5px;
	border-left: 20px solid transparent;
}
#sendemail{
	width:500px; 
	min-height:200px; 
	border: 1px solid #aaa;
	padding: 10px 10px 0 10px;
	font-family: 'Open Sans', serif;
	font-size: 15px;
	line-height: 26px;
}

</style>

</head>
<body>

<form action="sendemail" onsubmit="return false" method="post">
	<textarea id="sendemail"></textarea>
	<span id="count" style="display:block;">109 (1)</span>
</form>

<script type="text/javascript">
	$(document).ready(function(){
		$("#sendemail").on("keyup", function(event){
			if (event.keyCode == 13){
				$.post( "/sendemail", { content: $("#sendemail").val().trim()})
					.done(function() {
						$("#sendemail").val('');
						$("#count").html('');
					}).fail(function(err) {
						alert(err.responseText);
					});
			} else {
				var len = parseInt($("#sendemail").val().trim().length), numTexts = Math.ceil(len/109);
				$("#count").html(numTexts*109 - len+ " ("+numTexts+")");
			}
		});
	});
</script

</body>
</html>
